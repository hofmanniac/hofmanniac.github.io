---
layout: default
---

<article class="post-container">
  <div class="post-main-column">
    <header class="post-header">
      <h1 class="post-title">{{ page.title | escape }}</h1>
      <p class="post-meta">
        <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
          {{ page.date | date: "%b %-d, %Y" }}
        </time>
        {%- if page.author -%}
          â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">{{ page.author }}</span></span>
        {%- endif -%}
      </p>
      {%- if page.tags.size > 0 -%}
      <div class="post-tags">
        {%- for tag in page.tags -%}
          <span class="tag">{{ tag }}</span>
        {%- endfor -%}
      </div>
      {%- endif -%}
    </header>

    <div class="post-content">
      {{ content }}
    </div>
  </div>

  <aside class="post-sidebar">
    <div class="related-posts-container">
      <h3 class="related-posts-title">Related Posts</h3>
      
      {%- assign related_posts = "" | split: "" -%}
      {%- assign max_related = 5 -%}
      
      {%- if page.tags.size > 0 -%}
        {%- for post in site.posts -%}
          {%- if post.url != page.url -%}
            {%- assign common_tags = 0 -%}
            {%- for tag in post.tags -%}
              {%- if page.tags contains tag -%}
                {%- assign common_tags = common_tags | plus: 1 -%}
              {%- endif -%}
            {%- endfor -%}
            
            {%- if common_tags > 0 -%}
              {%- assign related_posts = related_posts | push: post -%}
            {%- endif -%}
          {%- endif -%}
        {%- endfor -%}
      {%- endif -%}

      {%- if related_posts.size > 0 -%}
        <div class="related-posts-list">
          {%- for post in related_posts limit: max_related -%}
            <a href="{{ post.url | relative_url }}" class="related-post-card">
              <div class="related-post-date">{{ post.date | date: "%b %-d, %Y" }}</div>
              <h4 class="related-post-title">{{ post.title }}</h4>
              {%- if post.tags.size > 0 -%}
                <div class="related-post-tags">
                  {%- for tag in post.tags limit: 3 -%}
                    {%- if page.tags contains tag -%}
                      <span class="mini-tag matched">{{ tag }}</span>
                    {%- else -%}
                      <span class="mini-tag">{{ tag }}</span>
                    {%- endif -%}
                  {%- endfor -%}
                </div>
              {%- endif -%}
            </a>
          {%- endfor -%}
        </div>
      {%- else -%}
        <p class="no-related-posts">No related posts found.</p>
      {%- endif -%}
    </div>
  </aside>
</article>
